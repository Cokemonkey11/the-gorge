package DamageReduction
	import DamageEvent
	import Equipment

	function h() returns bool
		real d = DamageEvent.getAmount()
		unit tU = DamageEvent.getTarget()

		if DamageEvent.getType() != CODE and Equipment.reduction.has(tU)
			if d < 0.
				d = d*-1.

			d = d*I2R(Equipment.reduction.get(tU))/100.
			SetWidgetLife(tU, GetWidgetLife(tU) + d)

		return false

	init
		DamageEvent.addListener() () ->
			h()
